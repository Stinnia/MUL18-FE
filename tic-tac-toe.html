<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Tic Tac Toe</title>
</head>

<body>
<h1>TIC TAC TOE, 2 player</h1>
<table width="400" border="1">
  <tbody>
    <tr>
      <td id="1">&nbsp;</td>
      <td id="2">&nbsp;</td>
      <td id="3">&nbsp;</td>
    </tr>
    <tr>
      <td id="4">&nbsp;</td>
      <td id="5">&nbsp;</td>
      <td id="6">&nbsp;</td>
    </tr>
    <tr>
      <td id="7">&nbsp;</td>
      <td id="8">&nbsp;</td>
      <td id="9">&nbsp;</td>
    </tr>
  </tbody>
</table>
<h2 id="msg">Click fields to play!</h2>
<script>
	
	/*
	
	Stuff to handle ;-):
	1. Make the fields clickable (player0 uses "X", player1 "0")
	2. Keep track of all used fields (fieldsPlayed) and of the fields each player chose (fieldsPlayer0, fieldsPlayer1)
	3. Avoid that Ãºsed fields can be played again and implement feedback like "Field already taken" (alert();)
	4. Check for winning combinations
	5. Implement feedback to the players (winning or game is a draw)
	6. End the game, avoid further playing
	7. Add a "Play again button"
	8. Implement game statistics (local storage!)
	9. Style the game to fit in the given Bootstrap layout ;-)
	
	*/
	
	// global game variables
	var player, fields, fieldsPlayed, fieldsPlayer1, fieldsPlayer2, msg;
	
	player = 1;
	// an array for all played fields
	fieldsPlayed = [];
	// arrays for each player
	fieldsPlayer1 = [];
	fieldsPlayer2 = [];
	
	// make all fields clickable
	fields = document.getElementsByTagName('td');
	
	for(let i = 0; i < fields.length; i++  ){
		fields[i].addEventListener('click', play);
	}
	
	msg = document.getElementById('msg');
	
	function play(){
		// game core mechanics, marking the fields
		//console.log('play!');
		if(fieldsPlayed.includes(this.id)){
			alert('Field already taken!');
		}
		
		if(player === 1 && !fieldsPlayed.includes(this.id)){
		// this addresses the "owner" of the function, i.e. <td>
		this.innerHTML = 'X';
		this.style.color = 'blue';
		fieldsPlayer1.push(parseInt(this.id));
		console.log('Player 1 played ' + fieldsPlayer1.toString());
		player = 2;
		} else if(player === 2 && !fieldsPlayed.includes(this.id)){
			this.innerHTML = '0';
			this.style.color = 'red';
			fieldsPlayer2.push(parseInt(this.id));
			console.log('Player 2 played ' + fieldsPlayer2.toString());
			player = 1;
		}
		// checking for a winning combination
		win();
		// store field in array
		fieldsPlayed.push(this.id);
		console.log(this.id + ' clicked!');
	}
		
	function win(){
		// analyzing field choices, winning conditions, feedback
		if(
			fieldsPlayer1.includes(1) && fieldsPlayer1.includes(4) && fieldsPlayer1.includes(7) ||
			fieldsPlayer1.includes(1) && fieldsPlayer1.includes(2) && fieldsPlayer1.includes(3)
			
		)
			{
			msg.innerHTML = "Player 1 won!";
		} else if (
			fieldsPlayer2.includes(1) && fieldsPlayer2.includes(4) && fieldsPlayer2.includes(7) ||
			fieldsPlayer2.includes(1) && fieldsPlayer2.includes(2) && fieldsPlayer2.includes(3)
		)
			{
			msg.innerHTML = "Player 2 won!";		
		}
	}

	function gameOver(){
		// ending the game 
	
	}
	
	function playAgain(){
		// restart the game
	}
	
	function gameStats(){
		// game stats using local storage
	}
</script>
</body>
</html>
