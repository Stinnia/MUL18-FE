<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<style>
	.form-error{
		color: red;
	}
</style>
<title>Guess it, win or loose!</title>
<!-- loading jQuery -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<!-- loading formvalidator plugin (formvalidator.net) -->
<script src="//cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js"></script>
<script>
	
	$( document ).ready(function() {
		// form validering
		// custom language object
		var myErrorFeedback = {
			badInt: 'Please enter a number between 0-10.'
		}
		// formvalidator setup function
		$.validate({
			// language object overwritten by custom language object
    		language : myErrorFeedback
  		});
  	//prevent form submission
    $("form").submit(function(event){
		//console.log('Form not submitted!');
		playGame();
		
        event.preventDefault();
    });
});
	
</script>
</head>

<body>
<h1>Guess a number!</h1>

<p id="output">I am thinking of a number between 0 and 10...</p>
<p>Try and guess my magic number - you have 3 attempts!</p>

<form method="post">
  <input id="guess" type= "number" data-validation="number" data-validation-allowing="range[0;10]" data-validation-error-msg-container="#error-dialog" placeholder="Enter your guess..." autofocus>
  <button id="play">Guess the magic number!</button>
  <!-- custom placement of error dialog -->
  <div id="error-dialog"></div>
</form>
<script>
	
/* 
Things to improve ;-):
- Prevent form submission (using jQuery!)
- A randomized magic number!
- Catch the player's guess from the form input field
- Match the player's guess agains the magic number
- Add proper feedback (That's too high - That's too low - You've got it)
- Player has only 3 guesses
- The game should prevent the player from playing after the game is finished
- Player can only enter numbers from 0-10, not words, into the input field (JS formcheck)
- Build an appalling ææh appealing responsive interface (Bootstrap)
*/
	
//Global game variables
var magicNumber, input, output, button, playersGuess, guessesRemaining;
	
magicNumber = Math.floor(Math.random() * 11); // random number 0-10
console.log(magicNumber);
	
//The game "controls"
input = document.getElementById("guess");
output = document.getElementById("output");
button = document.getElementById("play");
	
//Game state variable
guessesRemaining = 3;
	
function playGame(){
	// core functionality:
    // handling the game statistics (guessesRemaining)
	playersGuess = parseInt(input.value); // converting string input to number!
	//console.log(playersGuess);
	// countdown
	guessesRemaining -= 1;
	// analyzing the player's guess (i.e. the variable playersGuess!)
	if(playersGuess < magicNumber){
		output.innerHTML = playersGuess + ' is too low! ' + guessesRemaining + ' guesses left.';
		// clear the input field
		input.value = '';
		// autofocus
		input.focus();
	} else if(playersGuess > magicNumber){
		output.innerHTML = playersGuess + ' is too high!' + guessesRemaining + ' guesses left.';
		input.value = '';
		input.focus();
	} else if(playersGuess === magicNumber){
		output.innerHTML = 'You got it! ' + playersGuess + ' is the magic number!';
	} 
	// last attempt
	if(guessesRemaining === 0 && playersGuess === magicNumber){
		output.innerHTML = 'Yes - in the final attempt!';
		endGame();
	} else if(guessesRemaining === 0){
		output.innerHTML = 'Sorry - no more guesses left. Game over.';
		endGame();
	}
	
}// end function
	
function endGame(){	
	// disabling all game controls
	//alert('Game over!');
	button.disabled = true;
	input.disabled = true;
}
</script>
</body>
</html>
